# Update Admin Password Hash - Step by Step

## The Problem

Your database has the **old placeholder hash** (69 characters) instead of a **real Argon2 hash** (97+ characters). This is why password verification fails.

## Solution: Generate and Update Hash

### Step 1: Generate a password4j-Compatible Hash

Run this command to generate a hash using the same library your app uses:

```bash
mvn compile exec:java -Dexec.mainClass=util.GenerateAndUpdateHash
```

This will output:
- A hash generated by password4j (guaranteed compatible)
- The exact SQL UPDATE command to run

### Step 2: Update the Database

Copy the hash from Step 1 and run this SQL in MySQL:

```sql
USE CybersecurityDB;

UPDATE Administrators 
SET PasswordHash = '[PASTE_HASH_FROM_STEP_1_HERE]'
WHERE ContactEmail = 'admin@phishnet.com';
```

### Step 3: Verify the Update

```sql
SELECT 
    ContactEmail,
    LENGTH(PasswordHash) AS HashLength,
    SUBSTRING(PasswordHash, 1, 30) AS HashPreview
FROM Administrators 
WHERE ContactEmail = 'admin@phishnet.com';
```

Expected:
- HashLength: **97** or more (not 69)
- HashPreview: Should start with `$argon2id$v=19$m=65536,t=3,p=4$`

### Step 4: Test Login

Run the diagnostic again:
```bash
mvn compile exec:java -Dexec.mainClass=util.LoginDiagnostic
```

You should now see:
- ✓ Password verification SUCCESSFUL
- ✓ Full authentication SUCCESSFUL

## Alternative: Use Pre-Generated Hash

If the hash generation tool doesn't work, you can use this hash (generated with password4j-compatible parameters):

```sql
USE CybersecurityDB;

UPDATE Administrators 
SET PasswordHash = '$argon2id$v=19$m=65536,t=3,p=4$ZWgiDa9T95Bv2X+maeqSEQ$gmrWCU6zCEjJZ6Scgs+tX26VESOa+0MJ6qxOLntc+ys'
WHERE ContactEmail = 'admin@phishnet.com';
```

**Note**: This hash was generated with Python's argon2 library. If it still doesn't work, you MUST generate one using the Java tool above.

## Why This Happens

The database was populated before we generated real Argon2 hashes. The old placeholder hash (`c2FsdHNhbHRzYWx0c2FsdA`) is not a valid Argon2 hash and cannot be verified.

## Quick Fix Script

You can also run `fix_admin_password.sql` which contains the UPDATE statement:

```sql
SOURCE fix_admin_password.sql;
```

